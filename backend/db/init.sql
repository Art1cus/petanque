DO $$
BEGIN
    IF EXISTS (SELECT 1 FROM pg_database WHERE datname='petanque') THEN
        DROP DATABASE petanque;
    END IF;
END $$;

-- Create the petanque database
CREATE DATABASE petanque;

-- Connect to the petanque database
\c petanque;

-- Create the fields table
CREATE TABLE fields (
    field_id SERIAL PRIMARY KEY,
    field_name VARCHAR(255) NOT NULL
);

-- Create the rounds table
CREATE TABLE rounds (
    round_id SERIAL PRIMARY KEY,
    round_name VARCHAR(255) NOT NULL
);

-- Create the groups table
CREATE TABLE groups (
    group_id SERIAL PRIMARY KEY,
    group_name VARCHAR(255) NOT NULL,
    field_1_id INT REFERENCES fields(field_id),
    field_2_id INT REFERENCES fields(field_id)
);

-- Create the teams table
CREATE TABLE teams (
    team_id SERIAL PRIMARY KEY,
    team_name VARCHAR(255) NOT NULL,
    group_id INT REFERENCES groups(group_id)
);

-- Create the games table
CREATE TABLE games (
    game_id SERIAL PRIMARY KEY,
    field_id INT REFERENCES fields(field_id),
    round_id INT REFERENCES rounds(round_id),
    team_1_id INT REFERENCES teams(team_id),
    team_2_id INT REFERENCES teams(team_id),
    played BOOLEAN DEFAULT FALSE,
    start_datetime TIMESTAMP,
    end_datetime TIMESTAMP
);

-- Create the game_results table
CREATE TABLE game_results (
    result_id SERIAL PRIMARY KEY,
    game_id INT REFERENCES games(game_id),
    team_id INT REFERENCES teams(team_id),
    score INT NOT NULL,
    CONSTRAINT unique_game_team_constraint UNIQUE (game_id, team_id)
);

-- Insert sample data into fields table
INSERT INTO fields (field_name) 
VALUES 
    ('Rotary Kluisbergen'),
    ('Rotary Oudenaarde'),
    ('Kartonnage Joye'),
    ('Cnudde'),
    ('Roman'),
    ('T-Box'),    
    ('Rentec'),
    ('Numa');

-- Insert sample data into rounds table
INSERT INTO rounds (round_name) 
VALUES 
    ('Poule fase'),
    ('Halve finale'),
    ('Finale'),
    ('Kleine finale');
    

-- Insert sample data into groups table
INSERT INTO groups (group_name, field_1_id, field_2_id) 
VALUES 
    ('Poule 1', 1, 2),
    ('Poule 2', 3, 4),
    ('Poule 3', 5, 6),
    ('Poule 4', 7, 8);

-- Insert sample data into teams table
INSERT INTO teams (team_name, group_id) 
VALUES 
    ('Rotary Kluisbergen', 1),
    ('Rotary Oudenaarde', 1),
    ('FC ballen aan ons lijf', 1),
    ('Bouleo', 1),
    ('Kwik aan de bollen', 1),
    ('de leeglopers', 1),
    ('Boules of steel', 1),
    ('Loco Logo''s', 1),
    ('Boule & the gang', 1),
    ('De Volle Maan', 1),
    ('De Gladde Ballen', 1),
    ('Camille Cooman Fanclub', 1),
    ('Bouledozers', 1),
    ('The Rolling Balls', 1),
    ('Kartonnage Joye 1', 2),
    ('Kartonnage Joye 2', 2),
    ('Ai mijnen teen', 2),
    ('Kom allemaal naar Padeleo 17 mei', 2),
    ('Lemarcqdesign 1', 2),
    ('De meiden met ballen', 2),
    ('Les Rotaboulistes', 2),
    ('Met Orvallen en opstaan', 2),
    ('Il Domatore', 2),
    ('balls of steel', 2),
    ('Boule et brak', 2),
    ('Bas Construct', 2),
    ('The Rolling Leo''s', 2),
    ('we smijten er ons klak naar', 2),
    ('Brouwerij Roman', 3),
    ('T-BOX', 3),
    ('De Boulekes', 3),
    ('Freddy Frietvet en de pralines', 3),
    ('Boule d''Aalter', 3),
    ('Zoek je boules?', 3),
    ('Mandeleie 1', 3),
    ('Petancohol', 3),
    ('Les petanquelles', 3),
    ('de ros√©''tjes', 3),
    ('kunnen er geen ballen van', 3),
    ('de mannen met ballen', 3),
    ('Bouledozers 2', 3),
    ('Lemarcqdesign 2', 3),
    ('Boulamis', 4),
    ('Boulettekes', 4),
    ('Boenk Derop', 4),
    ('Margiloef', 4),
    ('The Rolling Stones', 4),
    ('Mandeleie 2', 4),
    ('The Rotaract Rollers', 4),
    ('Lauren''s balletjes', 4),
    ('De Ricard Rollers', 4),
    ('2 woorden', 4),
    ('De Juniors', 4),
    ('PC de ballejtes', 4),
    ('Van Nevel - Remarkable cars', 4),
    ('Salitos', 4);

-- -- Insert sample data into games table
INSERT INTO games (field_id, round_id, team_1_id, team_2_id, played, start_datetime, end_datetime) 
VALUES
    (1, 1, 1, 14, FALSE, '2025-04-26 14:00:00', '2025-04-26 14:15:00'),
    (2, 1, 2, 13, FALSE, '2025-04-26 14:00:00', '2025-04-26 14:15:00'),
    (1, 1, 3, 12, FALSE, '2025-04-26 14:15:00', '2025-04-26 14:30:00'),
    (2, 1, 4, 11, FALSE, '2025-04-26 14:15:00', '2025-04-26 14:30:00'),
    (1, 1, 5, 10, FALSE, '2025-04-26 14:30:00', '2025-04-26 14:45:00'),
    (2, 1, 6, 9, FALSE, '2025-04-26 14:30:00', '2025-04-26 14:45:00'),
    (2, 1, 7, 8, FALSE, '2025-04-26 14:45:00', '2025-04-26 15:00:00'),
    (1, 1, 1, 13, FALSE, '2025-04-26 14:45:00', '2025-04-26 15:00:00'),
    (1, 1, 14, 12, FALSE, '2025-04-26 15:00:00', '2025-04-26 15:15:00'),
    (2, 1, 2, 11, FALSE, '2025-04-26 15:00:00', '2025-04-26 15:15:00'),
    (1, 1, 3, 10, FALSE, '2025-04-26 15:15:00', '2025-04-26 15:30:00'),
    (2, 1, 4, 9, FALSE, '2025-04-26 15:15:00', '2025-04-26 15:30:00'),
    (1, 1, 5, 8, FALSE, '2025-04-26 15:30:00', '2025-04-26 15:45:00'),
    (2, 1, 6, 7, FALSE, '2025-04-26 15:30:00', '2025-04-26 15:45:00'),
    (1, 1, 1, 12, FALSE, '2025-04-26 15:45:00', '2025-04-26 16:00:00'),
    (2, 1, 13, 11, FALSE, '2025-04-26 15:45:00', '2025-04-26 16:00:00'),
    (1, 1, 14, 10, FALSE, '2025-04-26 16:00:00', '2025-04-26 16:15:00'),
    (2, 1, 2, 9, FALSE, '2025-04-26 16:00:00', '2025-04-26 16:15:00'),
    (1, 1, 3, 8, FALSE, '2025-04-26 16:15:00', '2025-04-26 16:30:00'),
    (2, 1, 4, 7, FALSE, '2025-04-26 16:15:00', '2025-04-26 16:30:00'),
    (2, 1, 5, 6, FALSE, '2025-04-26 16:30:00', '2025-04-26 16:45:00'),
    (1, 1, 1, 11, FALSE, '2025-04-26 16:30:00', '2025-04-26 16:45:00'),
    (1, 1, 12, 10, FALSE, '2025-04-26 16:45:00', '2025-04-26 17:00:00'),
    (2, 1, 13, 9, FALSE, '2025-04-26 16:45:00', '2025-04-26 17:00:00'),
    (1, 1, 14, 8, FALSE, '2025-04-26 17:00:00', '2025-04-26 17:15:00'),
    (2, 1, 2, 7, FALSE, '2025-04-26 17:00:00', '2025-04-26 17:15:00'),
    (1, 1, 3, 6, FALSE, '2025-04-26 17:15:00', '2025-04-26 17:30:00'),
    (2, 1, 4, 5, FALSE, '2025-04-26 17:15:00', '2025-04-26 17:30:00'),
    (3, 1, 15, 28, FALSE, '2025-04-26 14:00:00', '2025-04-26 14:15:00'),
    (4, 1, 16, 27, FALSE, '2025-04-26 14:00:00', '2025-04-26 14:15:00'),
    (3, 1, 17, 26, FALSE, '2025-04-26 14:15:00', '2025-04-26 14:30:00'),
    (4, 1, 18, 25, FALSE, '2025-04-26 14:15:00', '2025-04-26 14:30:00'),
    (3, 1, 19, 24, FALSE, '2025-04-26 14:30:00', '2025-04-26 14:45:00'),
    (4, 1, 20, 23, FALSE, '2025-04-26 14:30:00', '2025-04-26 14:45:00'),
    (3, 1, 21, 22, FALSE, '2025-04-26 14:45:00', '2025-04-26 15:00:00'),
    (4, 1, 15, 27, FALSE, '2025-04-26 14:45:00', '2025-04-26 15:00:00'),
    (3, 1, 28, 26, FALSE, '2025-04-26 15:00:00', '2025-04-26 15:15:00'),
    (4, 1, 16, 25, FALSE, '2025-04-26 15:00:00', '2025-04-26 15:15:00'),
    (3, 1, 17, 24, FALSE, '2025-04-26 15:15:00', '2025-04-26 15:30:00'),
    (4, 1, 18, 23, FALSE, '2025-04-26 15:15:00', '2025-04-26 15:30:00'),
    (3, 1, 19, 22, FALSE, '2025-04-26 15:30:00', '2025-04-26 15:45:00'),
    (4, 1, 20, 21, FALSE, '2025-04-26 15:30:00', '2025-04-26 15:45:00'),
    (3, 1, 15, 26, FALSE, '2025-04-26 15:45:00', '2025-04-26 16:00:00'),
    (4, 1, 27, 25, FALSE, '2025-04-26 15:45:00', '2025-04-26 16:00:00'),
    (3, 1, 28, 24, FALSE, '2025-04-26 16:00:00', '2025-04-26 16:15:00'),
    (4, 1, 16, 23, FALSE, '2025-04-26 16:00:00', '2025-04-26 16:15:00'),
    (3, 1, 17, 22, FALSE, '2025-04-26 16:15:00', '2025-04-26 16:30:00'),
    (4, 1, 18, 21, FALSE, '2025-04-26 16:15:00', '2025-04-26 16:30:00'),
    (3, 1, 19, 20, FALSE, '2025-04-26 16:30:00', '2025-04-26 16:45:00'),
    (4, 1, 15, 25, FALSE, '2025-04-26 16:30:00', '2025-04-26 16:45:00'),
    (3, 1, 26, 24, FALSE, '2025-04-26 16:45:00', '2025-04-26 17:00:00'),
    (4, 1, 27, 23, FALSE, '2025-04-26 16:45:00', '2025-04-26 17:00:00'),
    (3, 1, 28, 22, FALSE, '2025-04-26 17:00:00', '2025-04-26 17:15:00'),
    (4, 1, 16, 21, FALSE, '2025-04-26 17:00:00', '2025-04-26 17:15:00'),
    (3, 1, 17, 20, FALSE, '2025-04-26 17:15:00', '2025-04-26 17:30:00'),
    (4, 1, 18, 19, FALSE, '2025-04-26 17:15:00', '2025-04-26 17:30:00'),
    (5, 1, 29, 42, FALSE, '2025-04-26 14:00:00', '2025-04-26 14:15:00'),
    (6, 1, 30, 41, FALSE, '2025-04-26 14:00:00', '2025-04-26 14:15:00'),
    (5, 1, 31, 40, FALSE, '2025-04-26 14:15:00', '2025-04-26 14:30:00'),
    (6, 1, 32, 39, FALSE, '2025-04-26 14:15:00', '2025-04-26 14:30:00'),
    (5, 1, 33, 38, FALSE, '2025-04-26 14:30:00', '2025-04-26 14:45:00'),
    (6, 1, 34, 37, FALSE, '2025-04-26 14:30:00', '2025-04-26 14:45:00'),
    (6, 1, 35, 36, FALSE, '2025-04-26 14:45:00', '2025-04-26 15:00:00'),
    (5, 1, 29, 41, FALSE, '2025-04-26 14:45:00', '2025-04-26 15:00:00'),
    (5, 1, 42, 40, FALSE, '2025-04-26 15:00:00', '2025-04-26 15:15:00'),
    (6, 1, 30, 39, FALSE, '2025-04-26 15:00:00', '2025-04-26 15:15:00'),
    (5, 1, 31, 38, FALSE, '2025-04-26 15:15:00', '2025-04-26 15:30:00'),
    (6, 1, 32, 37, FALSE, '2025-04-26 15:15:00', '2025-04-26 15:30:00'),
    (5, 1, 33, 36, FALSE, '2025-04-26 15:30:00', '2025-04-26 15:45:00'),
    (6, 1, 34, 35, FALSE, '2025-04-26 15:30:00', '2025-04-26 15:45:00'),
    (5, 1, 29, 40, FALSE, '2025-04-26 15:45:00', '2025-04-26 16:00:00'),
    (6, 1, 41, 39, FALSE, '2025-04-26 15:45:00', '2025-04-26 16:00:00'),
    (5, 1, 42, 38, FALSE, '2025-04-26 16:00:00', '2025-04-26 16:15:00'),
    (6, 1, 30, 37, FALSE, '2025-04-26 16:00:00', '2025-04-26 16:15:00'),
    (5, 1, 31, 36, FALSE, '2025-04-26 16:15:00', '2025-04-26 16:30:00'),
    (6, 1, 32, 35, FALSE, '2025-04-26 16:15:00', '2025-04-26 16:30:00'),
    (6, 1, 33, 34, FALSE, '2025-04-26 16:30:00', '2025-04-26 16:45:00'),
    (5, 1, 29, 39, FALSE, '2025-04-26 16:30:00', '2025-04-26 16:45:00'),
    (5, 1, 40, 38, FALSE, '2025-04-26 16:45:00', '2025-04-26 17:00:00'),
    (6, 1, 41, 37, FALSE, '2025-04-26 16:45:00', '2025-04-26 17:00:00'),
    (5, 1, 42, 36, FALSE, '2025-04-26 17:00:00', '2025-04-26 17:15:00'),
    (6, 1, 30, 35, FALSE, '2025-04-26 17:00:00', '2025-04-26 17:15:00'),
    (5, 1, 31, 34, FALSE, '2025-04-26 17:15:00', '2025-04-26 17:30:00'),
    (6, 1, 32, 33, FALSE, '2025-04-26 17:15:00', '2025-04-26 17:30:00'),
    (7, 1, 43, 56, FALSE, '2025-04-26 14:00:00', '2025-04-26 14:15:00'),
    (8, 1, 45, 54, FALSE, '2025-04-26 14:00:00', '2025-04-26 14:15:00'),
    (7, 1, 44, 55, FALSE, '2025-04-26 14:15:00', '2025-04-26 14:30:00'),
    (8, 1, 46, 53, FALSE, '2025-04-26 14:15:00', '2025-04-26 14:30:00'),
    (7, 1, 47, 52, FALSE, '2025-04-26 14:30:00', '2025-04-26 14:45:00'),
    (8, 1, 48, 51, FALSE, '2025-04-26 14:30:00', '2025-04-26 14:45:00'),
    (7, 1, 49, 50, FALSE, '2025-04-26 14:45:00', '2025-04-26 15:00:00'),
    (8, 1, 43, 55, FALSE, '2025-04-26 14:45:00', '2025-04-26 15:00:00'),
    (7, 1, 56, 54, FALSE, '2025-04-26 15:00:00', '2025-04-26 15:15:00'),
    (8, 1, 44, 53, FALSE, '2025-04-26 15:00:00', '2025-04-26 15:15:00'),
    (7, 1, 45, 52, FALSE, '2025-04-26 15:15:00', '2025-04-26 15:30:00'),
    (8, 1, 46, 51, FALSE, '2025-04-26 15:15:00', '2025-04-26 15:30:00'),
    (7, 1, 47, 50, FALSE, '2025-04-26 15:30:00', '2025-04-26 15:45:00'),
    (8, 1, 48, 49, FALSE, '2025-04-26 15:30:00', '2025-04-26 15:45:00'),
    (7, 1, 43, 54, FALSE, '2025-04-26 15:45:00', '2025-04-26 16:00:00'),
    (8, 1, 55, 53, FALSE, '2025-04-26 15:45:00', '2025-04-26 16:00:00'),
    (7, 1, 56, 52, FALSE, '2025-04-26 16:00:00', '2025-04-26 16:15:00'),
    (8, 1, 44, 51, FALSE, '2025-04-26 16:00:00', '2025-04-26 16:15:00'),
    (7, 1, 45, 50, FALSE, '2025-04-26 16:15:00', '2025-04-26 16:30:00'),
    (8, 1, 46, 49, FALSE, '2025-04-26 16:15:00', '2025-04-26 16:30:00'),
    (7, 1, 47, 48, FALSE, '2025-04-26 16:30:00', '2025-04-26 16:45:00'),
    (8, 1, 43, 53, FALSE, '2025-04-26 16:30:00', '2025-04-26 16:45:00'),
    (7, 1, 54, 52, FALSE, '2025-04-26 16:45:00', '2025-04-26 17:00:00'),
    (8, 1, 55, 51, FALSE, '2025-04-26 16:45:00', '2025-04-26 17:00:00'),
    (7, 1, 56, 50, FALSE, '2025-04-26 17:00:00', '2025-04-26 17:15:00'),
    (8, 1, 44, 49, FALSE, '2025-04-26 17:00:00', '2025-04-26 17:15:00'),
    (7, 1, 45, 48, FALSE, '2025-04-26 17:15:00', '2025-04-26 17:30:00'),
    (8, 1, 46, 47, FALSE, '2025-04-26 17:15:00', '2025-04-26 17:30:00');